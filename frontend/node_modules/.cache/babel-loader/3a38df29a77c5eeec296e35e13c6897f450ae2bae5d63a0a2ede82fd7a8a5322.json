{"ast":null,"code":"var _jsxFileName = \"/Users/davicoscarelli/Documents/GitHub/makowebapp/frontend/src/components/SubTask.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport SubSubTask from './SubSubTask';\nimport useTaskActions from './useTaskActions';\nimport { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction SubTask({\n  subTask,\n  onDelete\n}) {\n  _s();\n  console.log(\"Rendering SubTask with props:\", subTask, onDelete);\n  const {\n    items: subSubTasks,\n    handleDelete,\n    handleAdd,\n    fetchData\n  } = useTaskActions('subtasks', subTask.id, \"subsubtasks\", 'tasks');\n  const [newSubSubTaskTitle, setNewSubSubTaskTitle] = React.useState(''); // <-- Add this state\n  const [refresh, setRefresh] = useState(true); // Add this line\n\n  const DeleteSubTask = () => {\n    console.log(\"Deleting subtask with ID:\", subTask.id);\n    handleDelete(subTask.id);\n    if (onDelete) {\n      onDelete(subTask.id);\n      console.log('subtask on delete!');\n    }\n  };\n  const handleSubSubTaskDeleted = () => {\n    console.log(\"SubSubTask deleted, refreshing data...\");\n    setRefresh(true); // Toggle the refresh state to trigger a re-fetch\n  };\n\n  useEffect(() => {\n    if (refresh) {\n      fetchData();\n      setRefresh(false); // Reset refresh state after fetching\n    }\n  }, [refresh, fetchData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"subtask\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: subTask.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: DeleteSubTask,\n      children: \"Delete SubTask\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), subSubTasks && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [subSubTasks.map(subSubTask => /*#__PURE__*/_jsxDEV(SubSubTask, {\n        subSubTask: subSubTask,\n        onDelete: () => handleSubSubTaskDeleted(subSubTask)\n      }, subSubTask.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"New SubSubTask Title\",\n        value: newSubSubTaskTitle // <-- Use the state value here\n        ,\n        onChange: e => setNewSubSubTaskTitle(e.target.value) // <-- Set the state here \n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAdd(newSubSubTaskTitle),\n        children: \"Add SubSubTask\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n_s(SubTask, \"AjzqI4clAebgUI/1ZypZ7ZtkaQA=\", false, function () {\n  return [useTaskActions];\n});\n_c = SubTask;\nexport default SubTask;\nvar _c;\n$RefreshReg$(_c, \"SubTask\");","map":{"version":3,"names":["React","SubSubTask","useTaskActions","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","SubTask","subTask","onDelete","_s","console","log","items","subSubTasks","handleDelete","handleAdd","fetchData","id","newSubSubTaskTitle","setNewSubSubTaskTitle","refresh","setRefresh","DeleteSubTask","handleSubSubTaskDeleted","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","subSubTask","type","placeholder","value","onChange","e","target","_c","$RefreshReg$"],"sources":["/Users/davicoscarelli/Documents/GitHub/makowebapp/frontend/src/components/SubTask.js"],"sourcesContent":["import React from 'react';\nimport SubSubTask from './SubSubTask';\nimport useTaskActions from './useTaskActions';\nimport { useState, useEffect } from 'react';\n\n\nfunction SubTask({subTask, onDelete }) {\n    console.log(\"Rendering SubTask with props:\", subTask, onDelete);\n\n    const { items: subSubTasks, handleDelete, handleAdd, fetchData } = useTaskActions('subtasks', subTask.id, \"subsubtasks\", 'tasks');\n    const [newSubSubTaskTitle, setNewSubSubTaskTitle] = React.useState(''); // <-- Add this state\n    const [refresh, setRefresh] = useState(true); // Add this line\n\n    const DeleteSubTask = () => {\n        console.log(\"Deleting subtask with ID:\", subTask.id);\n\n        handleDelete(subTask.id);\n        if (onDelete) {\n            onDelete(subTask.id);\n            console.log('subtask on delete!')\n        }\n    };    \n    \n\n    const handleSubSubTaskDeleted = () => {\n        console.log(\"SubSubTask deleted, refreshing data...\");\n        setRefresh(true); // Toggle the refresh state to trigger a re-fetch\n    };\n    \n    useEffect(() => {\n        if (refresh) {\n            fetchData();\n            setRefresh(false); // Reset refresh state after fetching\n        }\n    }, [refresh, fetchData]);\n\n\n    return (\n        <div className=\"subtask\">\n            <h3>{subTask.title}</h3>\n            <button onClick={DeleteSubTask}>Delete SubTask</button>\n            {subSubTasks && (\n                <>\n                    {subSubTasks.map(subSubTask => (\n                        <SubSubTask key={subSubTask.id} subSubTask={subSubTask} onDelete={() => handleSubSubTaskDeleted(subSubTask)} />\n                    ))}\n                    <input \n                        type=\"text\" \n                        placeholder=\"New SubSubTask Title\"\n                        value={newSubSubTaskTitle} // <-- Use the state value here\n                        onChange={e => setNewSubSubTaskTitle(e.target.value)}  // <-- Set the state here \n                    />\n                    <button onClick={() => handleAdd(newSubSubTaskTitle)}>\n                        Add SubSubTask\n                    </button>\n                </>\n            )}\n        </div>\n    );\n}\n\nexport default SubTask;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}