{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport axios from '../AxiosConfig.js';\nfunction useTaskActions(endpoint, id, subtasks, parentEndpoint) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [refresh, setRefresh] = useState(true); // Initialize with true to fetch data on mount\n  // const [taskdelete, setDelete] = useState(false);\n\n  const fetchData = useCallback(() => {\n    axios.get(`/${endpoint}/${id}/${subtasks}`, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(response => {\n      console.log(\"Fetched items:\", response.data);\n      setItems(response.data);\n    }).catch(error => {\n      console.error(`Error fetching ${endpoint}:`, error);\n    });\n  }, [endpoint, id, subtasks]);\n\n  // const fetchParent = async () => {\n  //     const parentid = await getParentTaskId();\n  //     await axios.delete(`/${endpoint}/${id}`);\n  //     if (endpoint === 'tasks') {\n  //         axios.get(`/tasks`, {\n  //             headers: {\n  //                 'Authorization': `Bearer ${localStorage.getItem('token')}`\n  //             }\n  //         })\n\n  //     } else {\n  //         axios.get(`/${parentEndpoint}/${parentid}/${endpoint}`, {\n  //             headers: {\n  //                 'Authorization': `Bearer ${localStorage.getItem('token')}`\n  //             }\n  //         })\n  //         setDelete(false)\n  //         .then(response => {\n  //             setItems(response.data);\n  //         })\n  //         .catch(error => {\n  //             console.error(`Error fetching ${endpoint}:`, error);\n  //         })\n  //     }\n  //     ;\n  // }\n\n  useEffect(() => {\n    if (refresh) {\n      fetchData();\n      setRefresh(false);\n    }\n  }, [refresh, fetchData]);\n\n  // const getParentTaskId = async () => {\n  //     try {\n  //         const response = await axios.get(`/${endpoint}/${id}`);\n  //         const data = response.data;\n\n  //         if (parentEndpoint === 'subtasks') {\n  //             return data.task_id; // Return task_id for subtasks\n  //         } else if (parentEndpoint === 'subsubtasks') {\n  //             return data.subtask_id; // Return subtask_id for subsubtask\n  //         } else if (parentEndpoint === 'tasks') {\n  //             return 0; // Return 0 for a task\n  //         }\n  //     } catch (error) {\n  //         console.error(`Error fetching parent ID for ${parentEndpoint}:`, error);\n  //         return null;\n  //     }\n  // };\n\n  const handleDelete = async itemId => {\n    try {\n      console.log(\"Attempting to delete item with ID:\", itemId);\n      await axios.delete(`/${endpoint}/${itemId}`);\n      console.log(\"Successfully deleted item with ID:\", itemId);\n      fetchData();\n      setRefresh(true);\n    } catch (error) {\n      console.error(`Error deleting ${endpoint}:`, error);\n    }\n  };\n  const handleAdd = title => {\n    axios.post(`/${endpoint}/${id}/${subtasks}`, {\n      title\n    }).then(() => {\n      setRefresh(true); // Trigger a refresh after successful addition\n    }).catch(error => {\n      console.error(`Error adding to ${endpoint}:`, error);\n    });\n  };\n  return {\n    items,\n    handleDelete,\n    handleAdd,\n    fetchData\n  };\n}\n_s(useTaskActions, \"zPK/UXnIf8qXOeLAeQB3aQCJGXY=\");\nexport default useTaskActions;","map":{"version":3,"names":["useState","useEffect","useCallback","axios","useTaskActions","endpoint","id","subtasks","parentEndpoint","_s","items","setItems","refresh","setRefresh","fetchData","get","headers","localStorage","getItem","then","response","console","log","data","catch","error","handleDelete","itemId","delete","handleAdd","title","post"],"sources":["/Users/davicoscarelli/Documents/GitHub/makowebapp/frontend/src/components/useTaskActions.js"],"sourcesContent":["import { useState, useEffect,useCallback } from 'react';\nimport axios from '../AxiosConfig.js';\n\nfunction useTaskActions(endpoint, id, subtasks, parentEndpoint) {\n    const [items, setItems] = useState([]);\n    const [refresh, setRefresh] = useState(true); // Initialize with true to fetch data on mount\n    // const [taskdelete, setDelete] = useState(false);\n\n    const fetchData = useCallback(() => {\n        axios.get(`/${endpoint}/${id}/${subtasks}`, {\n            headers: {\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\n            }\n        })\n        .then(response => {\n            console.log(\"Fetched items:\", response.data);\n\n            setItems(response.data);\n        })\n        .catch(error => {\n            console.error(`Error fetching ${endpoint}:`, error);\n        });\n    }, [endpoint, id, subtasks])\n\n    // const fetchParent = async () => {\n    //     const parentid = await getParentTaskId();\n    //     await axios.delete(`/${endpoint}/${id}`);\n    //     if (endpoint === 'tasks') {\n    //         axios.get(`/tasks`, {\n    //             headers: {\n    //                 'Authorization': `Bearer ${localStorage.getItem('token')}`\n    //             }\n    //         })\n            \n    //     } else {\n    //         axios.get(`/${parentEndpoint}/${parentid}/${endpoint}`, {\n    //             headers: {\n    //                 'Authorization': `Bearer ${localStorage.getItem('token')}`\n    //             }\n    //         })\n    //         setDelete(false)\n    //         .then(response => {\n    //             setItems(response.data);\n    //         })\n    //         .catch(error => {\n    //             console.error(`Error fetching ${endpoint}:`, error);\n    //         })\n    //     }\n    //     ;\n    // }\n    \n    useEffect(() => {\n        if (refresh) {\n            fetchData();\n            setRefresh(false);\n        }\n    }, [refresh, fetchData]);\n\n    // const getParentTaskId = async () => {\n    //     try {\n    //         const response = await axios.get(`/${endpoint}/${id}`);\n    //         const data = response.data;\n    \n    //         if (parentEndpoint === 'subtasks') {\n    //             return data.task_id; // Return task_id for subtasks\n    //         } else if (parentEndpoint === 'subsubtasks') {\n    //             return data.subtask_id; // Return subtask_id for subsubtask\n    //         } else if (parentEndpoint === 'tasks') {\n    //             return 0; // Return 0 for a task\n    //         }\n    //     } catch (error) {\n    //         console.error(`Error fetching parent ID for ${parentEndpoint}:`, error);\n    //         return null;\n    //     }\n    // };\n    \n    const handleDelete = async (itemId) => {\n        try {\n            console.log(\"Attempting to delete item with ID:\", itemId);\n\n            await axios.delete(`/${endpoint}/${itemId}`);\n            console.log(\"Successfully deleted item with ID:\", itemId);\n\n            fetchData();\n            setRefresh(true);\n        } catch (error) {\n            console.error(`Error deleting ${endpoint}:`, error);\n        }\n    };\n\n\n    const handleAdd = (title) => {\n        axios.post(`/${endpoint}/${id}/${subtasks}`, { title })\n            .then(() => {\n                setRefresh(true);// Trigger a refresh after successful addition\n            })\n            .catch(error => {\n                console.error(`Error adding to ${endpoint}:`, error);\n            });\n    };\n\n    return {\n        items,\n        handleDelete,\n        handleAdd, \n        fetchData\n    };\n}\n\nexport default useTaskActions;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAACC,WAAW,QAAQ,OAAO;AACvD,OAAOC,KAAK,MAAM,mBAAmB;AAErC,SAASC,cAAcA,CAACC,QAAQ,EAAEC,EAAE,EAAEC,QAAQ,EAAEC,cAAc,EAAE;EAAAC,EAAA;EAC5D,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC9C;;EAEA,MAAMc,SAAS,GAAGZ,WAAW,CAAC,MAAM;IAChCC,KAAK,CAACY,GAAG,CAAE,IAAGV,QAAS,IAAGC,EAAG,IAAGC,QAAS,EAAC,EAAE;MACxCS,OAAO,EAAE;QACL,eAAe,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;MAC7D;IACJ,CAAC,CAAC,CACDC,IAAI,CAACC,QAAQ,IAAI;MACdC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,QAAQ,CAACG,IAAI,CAAC;MAE5CZ,QAAQ,CAACS,QAAQ,CAACG,IAAI,CAAC;IAC3B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;MACZJ,OAAO,CAACI,KAAK,CAAE,kBAAiBpB,QAAS,GAAE,EAAEoB,KAAK,CAAC;IACvD,CAAC,CAAC;EACN,CAAC,EAAE,CAACpB,QAAQ,EAAEC,EAAE,EAAEC,QAAQ,CAAC,CAAC;;EAE5B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAN,SAAS,CAAC,MAAM;IACZ,IAAIW,OAAO,EAAE;MACTE,SAAS,CAAC,CAAC;MACXD,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACD,OAAO,EAAEE,SAAS,CAAC,CAAC;;EAExB;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMY,YAAY,GAAG,MAAOC,MAAM,IAAK;IACnC,IAAI;MACAN,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEK,MAAM,CAAC;MAEzD,MAAMxB,KAAK,CAACyB,MAAM,CAAE,IAAGvB,QAAS,IAAGsB,MAAO,EAAC,CAAC;MAC5CN,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEK,MAAM,CAAC;MAEzDb,SAAS,CAAC,CAAC;MACXD,UAAU,CAAC,IAAI,CAAC;IACpB,CAAC,CAAC,OAAOY,KAAK,EAAE;MACZJ,OAAO,CAACI,KAAK,CAAE,kBAAiBpB,QAAS,GAAE,EAAEoB,KAAK,CAAC;IACvD;EACJ,CAAC;EAGD,MAAMI,SAAS,GAAIC,KAAK,IAAK;IACzB3B,KAAK,CAAC4B,IAAI,CAAE,IAAG1B,QAAS,IAAGC,EAAG,IAAGC,QAAS,EAAC,EAAE;MAAEuB;IAAM,CAAC,CAAC,CAClDX,IAAI,CAAC,MAAM;MACRN,UAAU,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC,CAAC,CACDW,KAAK,CAACC,KAAK,IAAI;MACZJ,OAAO,CAACI,KAAK,CAAE,mBAAkBpB,QAAS,GAAE,EAAEoB,KAAK,CAAC;IACxD,CAAC,CAAC;EACV,CAAC;EAED,OAAO;IACHf,KAAK;IACLgB,YAAY;IACZG,SAAS;IACTf;EACJ,CAAC;AACL;AAACL,EAAA,CAxGQL,cAAc;AA0GvB,eAAeA,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}